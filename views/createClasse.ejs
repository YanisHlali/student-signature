<%- include('layout') %>

<div class="container mt-4">
    <h2>Créer une Nouvelle Classe</h2>
    <form action="/classes/create" method="POST" onsubmit="return validateForm()">
        <div class="form-group">
            <label for="promotion_id">Promotion</label>
            <select id="promotion_id" name="promotion_id" class="form-control" required>
                <% promotions.forEach(promotion => { %>
                <option value="<%= promotion.id %>"><%= promotion.name %> (<%= promotion.year %>)</option>
                <% }); %>
            </select>
        </div>
        <div class="form-group">
            <label for="course_id">Cours</label>
            <select id="course_id" name="course_id" class="form-control" required>
                <% courses.forEach(course => { %>
                <option value="<%= course.id %>"><%= course.subject_name %> par <%= course.user_firstname %> <%= course.user_lastname %></option>
                <% }); %>
            </select>
        </div>
        <div class="form-group">
            <label for="start">Début</label>
            <input type="datetime-local" id="start" name="start" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="end">Fin</label>
            <input type="datetime-local" id="end" name="end" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success">Créer</button>
        <a href="/classes" class="btn btn-secondary">Annuler</a>
    </form>
</div>

<script>
    function validateForm() {
        var start = new Date(document.getElementById('start').value);
        var end = new Date(document.getElementById('end').value);

        if (end <= start) {
            alert("L'heure de fin doit être après l'heure de début.");
            return false;
        }
        return true;
    }
</script>
